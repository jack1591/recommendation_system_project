# Рекомендательная система для проекта в `karpov.courses`
Система, которая выдает топ-5 рекомендации постов пользователям.

## Описание
Представим, что существует социальная сеть, которая обладает следующим функционалом: можно отправлять друг другу письма, создавать сообщества, аналогичные группам в известных сетях, и в этих сообществах публиковать посты.  
* При регистрации студенты должны заполнять данные по своему профилю, которые хранятся в поднятой на наших мощностях postgres database.  
* Также платформа обладает лентой, которую пользователи могут листать и просматривать случайные записи случайных сообществ. Если пост нравится, можно поддержать автора и поставить like.  
* Все действия пользователей сохраняются, каждая их активность, связанная с просмотром постов, тоже записывается в базу.

Платформа заинтересована в благосостоянии пользователей, поэтому разработчики решили усовершенствовать текущую ленту. А что, если показывать пользователям не случайные посты, а рекомендовать их точечно каждому пользователю из всего имеющегося множества написанных постов? Как это сделать и учесть индивидуальные характеристики профиля пользователя, его прошлую активность и содержимое самих постов?  

**Необходимо реализовать сервис, который будет для каждого юзера в любой момент времени возвращать посты, которые пользователю покажут в его ленте соцсети.**  

## Метрика
Качество написанного алгоритма проверяется по скрытому ряду user_id и ряду timestаmp (эмулируем запросы пользователей в разное время) по метрике **hitrate@5**:  
  
$$\frac{1}{n*T} \sum_{t=1}^{T} \sum_{i=1}^{n} \min(1, \sum_{j=1}^{5} [\mathbb{a}_{j}(\mathbb{x}_{i}, t) = 1])$$  

где:
* n - количество юзеров
* T - количество периодов проверки
* $$a_j(x_i, t)$$ - j-ая рекомендация i-ому пользователю в момент времени t;

_**Пояснение**_: Если из 5 рекомендаций хотя бы 1 оказалась релевантна для пользователя (подошла ему), значение будет равно 1, иначе 0 (бинарная метрика).

## Данные

**Таблица user_data**  
Cодержит информацию о всех пользователях соц.сети  
| Field Name | Overview |
|:-----------|:---------|
| age | Возраст пользователя (в профиле) |
| city | Город пользователя (в профиле) |
| country | Страна пользователя (в профиле) |
| exp_group | Экспериментальная группа: некоторая зашифрованная категория |
| gender | Пол пользователя |
| user_id | Уникальный идентификатор пользователя |
| os | Операционная система устройства, с которого происходит пользование соц.сетью |
| source | Пришел ли пользователь в приложение с органического трафика или с рекламы |
  
**Таблица post_text_df**  
Содержит информацию о постах и уникальный ID каждой единицы с соответствующим ей текстом и топиком  
| Field name | Overview |
|:-----------|:---------|
|id|	Уникальный идентификатор поста|
|text|	Текстовое содержание поста|
|topic|	Основная тематика|
  
**Таблица feed_data**  
Содержит историю о просмотренных постах для каждого юзера в изучаемый период.  
_**Данная таблциа очень большая, я обучал модель на 500,000 записей**_
| Field name | Overview |
|:-----------|:---------|
|timestamp|	Время, когда был произведен просмотр|
|user_id|	id пользователя, который совершил просмотр|
|post_id|	id просмотренного поста|
|action|	Тип действия: просмотр или лайк|
|target|	1 у просмотров, если почти сразу после просмотра был совершен лайк, иначе 0. У действий like пропущенное значение|
